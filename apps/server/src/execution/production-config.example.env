# Production Configuration Template for Execution Abstraction Layer
# Copy this file to .env and customize for your deployment

# =============================================================================
# EXECUTION MODE CONFIGURATION
# =============================================================================

# Agent execution mode: local, remote, or mock
# - local: Direct filesystem operations (default for development)
# - remote: Distributed execution via Kubernetes pods (production)
# - mock: Simulated remote behavior (testing only)
AGENT_MODE=remote

# =============================================================================
# LOCAL MODE CONFIGURATION
# =============================================================================

# Base directory for task workspaces (local mode only)
WORKSPACE_DIR=/var/lib/shadow/workspaces

# =============================================================================
# REMOTE MODE CONFIGURATION (Kubernetes)
# =============================================================================

# Kubernetes cluster configuration
KUBERNETES_NAMESPACE=shadow-agents
K8S_SERVICE_ACCOUNT_TOKEN=your-service-account-token-here

# Sidecar service configuration
SIDECAR_IMAGE=your-registry.com/shadow-sidecar:v1.0.0
SIDECAR_PORT=8080
SIDECAR_HEALTH_PATH=/health

# Resource limits for agent pods
REMOTE_CPU_LIMIT=2000m
REMOTE_MEMORY_LIMIT=4Gi

# =============================================================================
# ERROR HANDLING & RESILIENCE CONFIGURATION
# =============================================================================

# HTTP request timeout for remote operations (milliseconds)
REMOTE_REQUEST_TIMEOUT=30000

# Retry configuration
REMOTE_MAX_RETRIES=3
REMOTE_RETRY_DELAY=1000

# Circuit breaker configuration
REMOTE_CIRCUIT_BREAKER_THRESHOLD=5
REMOTE_CIRCUIT_BREAKER_TIMEOUT=60000

# =============================================================================
# MONITORING & LOGGING CONFIGURATION
# =============================================================================

# Log levels: debug, info, warn, error
LOG_LEVEL=info

# Enable detailed operation logging
ENABLE_OPERATION_LOGGING=true

# Enable performance metrics
ENABLE_METRICS=true

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# GitHub access configuration
GITHUB_TOKEN=your-github-token-here
GITHUB_APP_ID=your-github-app-id
GITHUB_APP_PRIVATE_KEY=your-github-app-private-key

# Security headers for remote API calls
REMOTE_API_TIMEOUT=30000
REMOTE_API_USER_AGENT=Shadow-Agent/1.0.0

# =============================================================================
# PRODUCTION DEPLOYMENT VARIABLES
# =============================================================================

# Environment identifier
NODE_ENV=production
DEPLOYMENT_ENV=production

# Health check configuration
HEALTH_CHECK_INTERVAL=30000
WORKSPACE_CLEANUP_INTERVAL=3600000

# Resource monitoring
MAX_CONCURRENT_TASKS=10
MAX_WORKSPACE_SIZE=10737418240  # 10GB in bytes
WORKSPACE_RETENTION_HOURS=24

# =============================================================================
# KUBERNETES SPECIFIC CONFIGURATION
# =============================================================================

# Pod specification defaults
POD_RESTART_POLICY=Never
POD_SERVICE_ACCOUNT=shadow-agent-sa

# Storage configuration
WORKSPACE_STORAGE_CLASS=fast-ssd
WORKSPACE_VOLUME_SIZE=10Gi

# Network configuration
CLUSTER_DNS_SUFFIX=cluster.local
INTERNAL_NETWORK_POLICY=shadow-network-policy

# Image pull configuration
IMAGE_PULL_POLICY=Always
IMAGE_PULL_SECRETS=your-registry-secret

# =============================================================================
# OPTIONAL: ADVANCED CONFIGURATION
# =============================================================================

# Custom sidecar endpoints (if different from defaults)
# SIDECAR_FILES_ENDPOINT=/api/files
# SIDECAR_COMMAND_ENDPOINT=/api/execute
# SIDECAR_SEARCH_ENDPOINT=/api/search

# Performance tuning
# WORKSPACE_PREPARATION_TIMEOUT=300000  # 5 minutes
# POD_READY_TIMEOUT=120000              # 2 minutes
# COMMAND_EXECUTION_TIMEOUT=600000      # 10 minutes

# Development overrides (remove in production)
# SKIP_TLS_VERIFICATION=false
# ENABLE_DEBUG_LOGGING=false
# MOCK_FAILURE_RATE=0.0